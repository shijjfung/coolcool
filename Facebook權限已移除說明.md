# Facebook Groups API 已移除 - 重要通知

## ⚠️ 重要變更

**Facebook 已於 2024 年 4 月 22 日起從所有版本中移除 Groups API 功能。**

這意味著：

- ❌ **無法再申請或使用** `groups_read_content` 權限
- ❌ **無法再申請或使用** `groups_access_member_info` 權限
- ❌ **無法透過 API 自動讀取群組貼文留言**
- ❌ **無法透過 API 自動回覆群組留言**
- ❌ **群組管理員無法在群組中安裝應用程式**

## 影響範圍

### 受影響的功能

1. **Facebook 自動監控留言功能** ❌
   - 無法自動掃描 Facebook 群組貼文的留言
   - 無法自動抓取 `+1` 等關鍵字留言
   - 無法自動回覆留言

2. **Facebook 自動回覆功能** ❌
   - 無法自動回覆「已登記」等訊息
   - 無法自動發送取貨通知

### 不受影響的功能

1. **LINE 自動監控功能** ✅
   - LINE BOT 功能完全正常
   - 可以繼續在 LINE 群組中自動監控留言
   - 可以繼續自動回覆 LINE 訊息

2. **客戶下單功能** ✅
   - 客戶可以透過下單連結直接下單
   - 所有下單功能正常運作

3. **後台管理功能** ✅
   - 表單管理、訂單管理等功能正常
   - 報表生成功能正常

## 替代方案

### 方案 1：使用 LINE 自動監控（推薦）✅

**優點：**
- 功能完整，不受 Facebook 政策影響
- 可以自動監控留言、自動回覆
- 可以自動發送開單和結單通知

**設定步驟：**
1. 在創建表單時，啟用「LINE 自動監控」
2. 設定 LINE 發文者姓名
3. 設定 LINE 關鍵字（如 `+1`、`+2` 等）
4. 設定 LINE 回覆訊息

### 方案 2：引導客戶使用下單連結 ✅

**優點：**
- 簡單直接，客戶體驗好
- 不需要額外設定
- 功能穩定可靠

**使用方式：**
1. 在 Facebook 貼文中提供下單連結
2. 客戶點擊連結直接下單
3. 系統自動記錄訂單

### 方案 3：手動輸入訂單 ✅

**適用場景：**
- 客戶在 Facebook 留言下單
- 管理員手動在後台輸入訂單

**操作步驟：**
1. 登入後台管理系統
2. 找到對應的表單
3. 手動新增訂單
4. 輸入客戶資訊和訂單內容

### 方案 4：使用 Facebook Webhook（有限功能）⚠️

**限制：**
- 僅能接收 Facebook 主動推送的事件
- 無法主動掃描留言
- 需要 Facebook 先發送事件通知

**適用場景：**
- 如果 Facebook 有推送留言事件（但通常不會推送）
- 功能非常有限，不建議使用

## 建議行動

### 立即行動

1. **啟用 LINE 自動監控**
   - 如果還沒有設定 LINE BOT，請盡快設定
   - LINE 功能完全正常，不受影響

2. **在 Facebook 貼文中提供下單連結**
   - 引導客戶使用下單連結
   - 減少對留言監控的依賴

3. **關閉 Facebook 自動監控功能**
   - 在表單設定中關閉「Facebook 自動監控」
   - 避免系統持續嘗試無法使用的功能

### 長期規劃

1. **以 LINE 為主要自動化平台**
   - LINE BOT 功能穩定可靠
   - 不受 Facebook 政策變更影響

2. **優化下單連結體驗**
   - 確保下單連結易於分享
   - 提供清晰的說明文字

3. **建立標準作業流程**
   - 對於 Facebook 留言，建立手動處理流程
   - 培訓團隊成員使用後台手動輸入訂單

## 常見問題

### Q1: 為什麼 Facebook 要移除這些功能？

A: Facebook（現為 Meta）為了保護用戶隱私和資料安全，決定移除群組相關的 API 功能。這是全球性的政策變更，所有開發者都受到影響。

### Q2: 有沒有辦法恢復這個功能？

A: 很遺憾，目前沒有官方支持的方式可以恢復這個功能。Facebook 已經明確表示不會再提供群組相關的 API 權限。

### Q3: LINE 功能會受到影響嗎？

A: 不會。LINE 自動監控功能完全獨立於 Facebook，不受此次變更影響。

### Q4: 我應該如何處理現有的 Facebook 訂單？

A: 現有的訂單資料不會受到影響，您可以繼續在後台查看和管理這些訂單。

### Q5: 系統會自動停止嘗試 Facebook 掃描嗎？

A: 系統會持續嘗試，但會失敗。建議您在表單設定中關閉「Facebook 自動監控」功能，以避免不必要的 API 呼叫。

## 技術細節

### 相關錯誤訊息

如果您看到以下錯誤，這是正常的：

1. **錯誤代碼 100 + 子代碼 33**：
   ```
   Unsupported get request. Object with ID 'XXX' does not exist, 
   cannot be loaded due to missing permissions
   ```
   - 這表示 Groups API 功能已被移除

2. **錯誤代碼 10**：
   ```
   To use this endpoint, your use of this endpoint must be reviewed 
   and approved by Facebook
   ```
   - 這表示該功能需要審核，但由於功能已被移除，無法再申請

### 系統行為

- 系統會持續嘗試掃描，但會失敗
- 日誌中會顯示詳細的錯誤訊息
- 不會影響其他功能（如 LINE、下單連結等）

## 相關連結

- [Facebook Graph API 變更日誌](https://developers.facebook.com/docs/graph-api/changelog)
- [Meta 開發者公告](https://developers.facebook.com/blog/)

## 總結

**Facebook Groups API 功能已永久移除，無法恢復。**

**建議：**
- ✅ 優先使用 LINE 自動監控功能
- ✅ 引導客戶使用下單連結
- ✅ 關閉 Facebook 自動監控功能
- ✅ 建立手動處理流程

系統的其他功能（LINE、下單、後台管理等）完全正常，不受影響。


