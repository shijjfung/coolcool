# 訂單管理系統

一個完整的訂單管理系統，讓老闆可以自訂表單欄位，客戶填寫訂單，並自動生成報表。

## 功能特色

- 📝 **表單設計器**：老闆可以自訂表單欄位（文字、數字、下拉選單）
- 🔗 **QR Code 分享**：自動生成 QR code 和分享網址
- 🔐 **訂單驗證**：客戶修改訂單時需要驗證姓名和電話，確保安全性
- ✏️ **訂單修改**：客戶可以使用訂單代碼和身份驗證修改已送出的訂單
- ⏰ **截止時間**：設定表單截止時間，超過時間後無法填寫或修改
- 📊 **報表統計**：自動統計訂單數據，支援 CSV 匯出
- 📱 **響應式設計**：支援手機、平板、電腦等各種裝置
- 💻 **桌面應用**：可打包成 Windows 執行檔（.exe），無需瀏覽器

## 技術棧

- **前端框架**：Next.js 14 + React 18
- **樣式**：Tailwind CSS
- **資料庫**：SQLite
- **QR Code**：qrcode 套件

## 安裝步驟

1. 安裝依賴套件：
```bash
npm install
```

2. 啟動開發伺服器：
```bash
npm run dev
```

3. 開啟瀏覽器訪問：
```
http://localhost:3000
```

## 使用說明

### 老闆端

1. **建立表單**
   - 前往 `/admin` 頁面
   - 點擊「建立新表單」
   - 填寫表單名稱和截止時間
   - 新增表單欄位（可設定欄位類型、是否必填）
   - 儲存表單

2. **分享表單**
   - 表單建立後會自動跳轉到分享頁面
   - 可以複製網址或下載 QR code
   - 將網址或 QR code 分享給客戶

3. **查看報表**
   - 在管理頁面點擊「查看報表」
   - 查看訂單統計和明細
   - 可以匯出 CSV 檔案

### 客戶端

1. **填寫表單**
   - 使用老闆提供的網址或掃描 QR code
   - 填寫表單欄位（建議填寫姓名和電話，方便後續修改）
   - 送出訂單
   - **記住訂單代碼**（系統會顯示）

2. **修改訂單**
   - 在表單頁面輸入訂單代碼
   - **輸入當初填寫的姓名和電話進行驗證**
   - 驗證通過後載入訂單
   - 修改訂單內容
   - 更新訂單

## 專案結構

```
├── pages/
│   ├── api/              # API 路由
│   │   ├── forms/        # 表單相關 API
│   │   ├── orders/       # 訂單相關 API
│   │   ├── reports/      # 報表相關 API
│   │   └── qrcode.ts     # QR code 生成
│   ├── admin/            # 老闆端頁面
│   │   ├── index.tsx     # 表單列表
│   │   ├── create.tsx    # 建立表單
│   │   ├── share/        # 分享表單
│   │   └── forms/        # 查看報表
│   ├── form/             # 客戶端頁面
│   └── index.tsx         # 首頁
├── lib/
│   └── db.ts             # 資料庫操作
├── styles/
│   └── globals.css       # 全局樣式
└── orders.db             # SQLite 資料庫（自動生成）
```

## 注意事項

- 資料庫檔案 `orders.db` 會自動在專案根目錄生成
- 建議定期備份資料庫檔案
- 截止時間到達後，客戶將無法填寫或修改訂單
- 訂單代碼請妥善保管，用於後續修改訂單
- **修改訂單時需要驗證姓名和電話**，請確保填寫正確的聯絡資訊
- 可以打包成 Windows 執行檔，詳見 `BUILD.md`
- 資料庫實現說明請參考 `DATABASE.md`

## 開發

```bash
# 開發模式
npm run dev

# 建置生產版本
npm run build

# 啟動生產伺服器
npm start
```

## 授權

MIT License

