<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡¨å–®æ¼”ç¤º</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .step {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-left: 4px solid #4CAF50;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #45a049;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 5px;
            display: none;
        }
        .result.show {
            display: block;
        }
        .link {
            color: #2196F3;
            text-decoration: none;
            font-weight: bold;
        }
        .link:hover {
            text-decoration: underline;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ è¡¨å–®ç³»çµ±æ¼”ç¤º</h1>
        
        <div class="step">
            <h2>æ­¥é©Ÿ 1: å»ºç«‹æ¼”ç¤ºè¡¨å–®</h2>
            <p>é»æ“ŠæŒ‰éˆ•è‡ªå‹•å»ºç«‹ä¸€å€‹æ¸¬è©¦è¡¨å–®ï¼ˆé¤é£²æ¨¡æ¿ï¼‰</p>
            <button onclick="createDemoForm()">ğŸ“ å»ºç«‹æ¼”ç¤ºè¡¨å–®</button>
        </div>

        <div class="step">
            <h2>æ­¥é©Ÿ 2: å»ºç«‹æ¸¬è©¦è¨‚å–®</h2>
            <p>å»ºç«‹ä¸€å€‹æ¸¬è©¦è¨‚å–®ï¼ˆéœ€è¦å…ˆå®Œæˆæ­¥é©Ÿ 1ï¼‰</p>
            <button onclick="createDemoOrder()">ğŸ“¦ å»ºç«‹æ¸¬è©¦è¨‚å–®</button>
        </div>

        <div id="result" class="result">
            <h3>âœ… æ“ä½œçµæœï¼š</h3>
            <div id="resultContent"></div>
        </div>

        <div class="step">
            <h2>ğŸ“‹ æ¼”ç¤ºå…§å®¹</h2>
            <ul>
                <li>âœ… å¿«é€Ÿæ¨¡æ¿å»ºç«‹è¡¨å–®</li>
                <li>âœ… è©¦ç®—è¡¨é¢¨æ ¼å¡«å¯«ä»‹é¢</li>
                <li>âœ… é©—è­‰æ©Ÿåˆ¶ä¿è­·è¨‚å–®</li>
                <li>âœ… å ±è¡¨çµ±è¨ˆåŠŸèƒ½</li>
            </ul>
        </div>
    </div>

    <script>
        let formToken = '';
        let orderToken = '';

        async function createDemoForm() {
            const resultDiv = document.getElementById('result');
            const contentDiv = document.getElementById('resultContent');
            
            try {
                contentDiv.innerHTML = 'â³ æ­£åœ¨å»ºç«‹è¡¨å–®...';
                resultDiv.classList.add('show');

                const response = await fetch('http://localhost:3000/api/forms/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: 'æ¼”ç¤ºè¨‚å–®è¡¨å–® - 2024å¹´æ˜¥å­£',
                        deadline: '2024-12-31T23:59:00',
                        fields: [
                            { name: 'customer_name', label: 'å®¢æˆ¶å§“å', type: 'text', required: true },
                            { name: 'customer_phone', label: 'é›»è©±', type: 'text', required: true },
                            { name: 'product_name', label: 'å•†å“åç¨±', type: 'text', required: true },
                            { name: 'quantity', label: 'è¨‚è³¼æ•¸é‡', type: 'number', required: true },
                            { name: 'spicy_level', label: 'è¾£åº¦', type: 'select', required: true, options: ['ä¸è¾£', 'å¾®è¾£', 'è¾£'] }
                        ]
                    })
                });

                const data = await response.json();
                
                if (response.ok) {
                    formToken = data.formToken;
                    contentDiv.innerHTML = `
                        <h4>âœ… è¡¨å–®å»ºç«‹æˆåŠŸï¼</h4>
                        <p><strong>è¡¨å–®åç¨±ï¼š</strong>æ¼”ç¤ºè¨‚å–®è¡¨å–® - 2024å¹´æ˜¥å­£</p>
                        <p><strong>è¡¨å–® Tokenï¼š</strong><code>${formToken}</code></p>
                        <p><strong>è¡¨å–®æ¬„ä½ï¼š</strong>å®¢æˆ¶å§“åã€é›»è©±ã€å•†å“åç¨±ã€è¨‚è³¼æ•¸é‡ã€è¾£åº¦</p>
                        <hr>
                        <p><strong>ğŸ“‹ å®¢æˆ¶å¡«å¯«è¡¨å–®ï¼š</strong></p>
                        <a href="http://localhost:3000/form/${formToken}" target="_blank" class="link">
                            http://localhost:3000/form/${formToken}
                        </a>
                        <hr>
                        <p><strong>ğŸ‘” ç®¡ç†é é¢ï¼š</strong></p>
                        <a href="http://localhost:3000/admin" target="_blank" class="link">
                            http://localhost:3000/admin
                        </a>
                    `;
                } else {
                    contentDiv.innerHTML = `<p style="color: red;">âŒ éŒ¯èª¤ï¼š${data.error || 'å»ºç«‹è¡¨å–®å¤±æ•—'}</p>`;
                }
            } catch (error) {
                contentDiv.innerHTML = `<p style="color: red;">âŒ éŒ¯èª¤ï¼š${error.message}</p>`;
            }
        }

        async function createDemoOrder() {
            if (!formToken) {
                alert('è«‹å…ˆå»ºç«‹è¡¨å–®ï¼');
                return;
            }

            const resultDiv = document.getElementById('result');
            const contentDiv = document.getElementById('resultContent');
            
            try {
                contentDiv.innerHTML = 'â³ æ­£åœ¨å»ºç«‹è¨‚å–®...';
                resultDiv.classList.add('show');

                const response = await fetch('http://localhost:3000/api/orders/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        formToken: formToken,
                        customerName: 'å¼µä¸‰',
                        customerPhone: '0912345678',
                        orderData: {
                            customer_name: 'å¼µä¸‰',
                            customer_phone: '0912345678',
                            product_name: 'éº»è¾£ç‡™',
                            quantity: 3,
                            spicy_level: 'å¾®è¾£'
                        }
                    })
                });

                const data = await response.json();
                
                if (response.ok) {
                    orderToken = data.orderToken;
                    contentDiv.innerHTML = `
                        <h4>âœ… è¨‚å–®å»ºç«‹æˆåŠŸï¼</h4>
                        <p><strong>è¨‚å–®è³‡è¨Šï¼š</strong></p>
                        <ul>
                            <li>å®¢æˆ¶å§“åï¼šå¼µä¸‰</li>
                            <li>é›»è©±ï¼š0912345678</li>
                            <li>å•†å“åç¨±ï¼šéº»è¾£ç‡™</li>
                            <li>è¨‚è³¼æ•¸é‡ï¼š3</li>
                            <li>è¾£åº¦ï¼šå¾®è¾£</li>
                        </ul>
                        <p><strong>è¨‚å–®ä»£ç¢¼ï¼š</strong><code>${orderToken}</code></p>
                        <hr>
                        <p><strong>ğŸ§ª æ¸¬è©¦é©—è­‰æ©Ÿåˆ¶ï¼š</strong></p>
                        <ol>
                            <li>è¨ªå•è¡¨å–®ï¼š<a href="http://localhost:3000/form/${formToken}" target="_blank" class="link">é»æ“Šé€™è£¡</a></li>
                            <li>è¼¸å…¥è¨‚å–®ä»£ç¢¼ï¼š<code>${orderToken}</code></li>
                            <li>å¡«å¯«é©—è­‰è³‡è¨Šï¼š
                                <ul>
                                    <li>å§“åï¼š<strong>å¼µä¸‰</strong></li>
                                    <li>é›»è©±ï¼š<strong>0912345678</strong></li>
                                </ul>
                            </li>
                            <li>é»æ“Šã€Œé©—è­‰ä¸¦è¼‰å…¥è¨‚å–®ã€</li>
                        </ol>
                        <hr>
                        <p><strong>ğŸ“Š æŸ¥çœ‹å ±è¡¨ï¼š</strong></p>
                        <a href="http://localhost:3000/admin" target="_blank" class="link">å‰å¾€ç®¡ç†é é¢æŸ¥çœ‹å ±è¡¨</a>
                    `;
                } else {
                    contentDiv.innerHTML = `<p style="color: red;">âŒ éŒ¯èª¤ï¼š${data.error || 'å»ºç«‹è¨‚å–®å¤±æ•—'}</p>`;
                }
            } catch (error) {
                contentDiv.innerHTML = `<p style="color: red;">âŒ éŒ¯èª¤ï¼š${error.message}</p>`;
            }
        }
    </script>
</body>
</html>




