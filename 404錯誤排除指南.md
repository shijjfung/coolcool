# 404 Not Found 錯誤排除指南

## 錯誤訊息

```
404 Not Found
```

## 可能的原因

### 1. API 端點不存在
- 檔案路徑錯誤
- API 路由未正確設定

### 2. URL 錯誤
- 網址輸入錯誤
- 缺少路徑或路徑不正確

### 3. 部署未完成
- Vercel 還在部署中
- 最新程式碼還沒部署

## 檢查步驟

### 步驟 1：確認 API 端點是否存在

LINE 結單檢查 API 應該在：
```
pages/api/cron/line-deadline-check.ts
```

對應的 URL 應該是：
```
https://coolcool-ten.vercel.app/api/cron/line-deadline-check
```

### 步驟 2：檢查 Vercel 部署狀態

1. 前往 Vercel Dashboard：https://vercel.com/dashboard
2. 點擊專案：**coolcool**
3. 點擊 **Deployments** 標籤
4. 確認最新部署狀態為 **Ready**（綠色）
5. 如果還在 Building，請等待完成

### 步驟 3：檢查 Functions

1. 在 Vercel Dashboard 中，點擊 **Functions** 標籤
2. 查看是否有 `/api/cron/line-deadline-check` 這個函數
3. 如果沒有，表示部署可能有問題

### 步驟 4：測試 API 端點

在瀏覽器中打開：
```
https://coolcool-ten.vercel.app/api/cron/line-deadline-check
```

**預期結果**：
- 如果沒有 Authorization header：應該返回 401 Unauthorized
- 如果有正確的 header：可能返回 200 或其他狀態碼
- 如果返回 404：表示 API 端點不存在或 URL 錯誤

## 常見錯誤

### 錯誤 1：URL 路徑錯誤

❌ **錯誤**：
```
https://coolcool-ten.vercel.app/line-deadline-check
```

✅ **正確**：
```
https://coolcool-ten.vercel.app/api/cron/line-deadline-check
```

注意：必須包含 `/api/cron/` 前綴

### 錯誤 2：缺少 /api 前綴

❌ **錯誤**：
```
https://coolcool-ten.vercel.app/cron/line-deadline-check
```

✅ **正確**：
```
https://coolcool-ten.vercel.app/api/cron/line-deadline-check
```

### 錯誤 3：檔案名稱錯誤

確認檔案路徑：
- ✅ 正確：`pages/api/cron/line-deadline-check.ts`
- ❌ 錯誤：`pages/api/line-deadline-check.ts`（缺少 `cron/` 目錄）

## 正確的 URL 格式

### LINE 結單檢查
```
https://coolcool-ten.vercel.app/api/cron/line-deadline-check
```

### Facebook 留言掃描
```
https://coolcool-ten.vercel.app/api/facebook/scan-comments
```

## 解決方案

### 方案 1：檢查 URL 是否正確

在 cron-job.org 中確認網址是：
```
https://coolcool-ten.vercel.app/api/cron/line-deadline-check
```

**注意**：
- 必須包含 `https://`
- 必須包含 `/api/cron/` 路徑
- 檔案名稱是 `line-deadline-check`（不是 `line-deadline` 或其他）

### 方案 2：等待部署完成

如果剛剛推送了程式碼：
1. 等待 Vercel 部署完成（1-3 分鐘）
2. 確認部署狀態為 **Ready**
3. 再次測試

### 方案 3：手動觸發部署

如果部署沒有自動觸發：
1. 前往 Vercel Dashboard > Deployments
2. 點擊 **"Create Deployment"**
3. 選擇 Branch: `main`
4. 點擊 **"Deploy"**

## 驗證 API 是否存在

### 方法 1：檢查 Vercel Functions

1. 前往 Vercel Dashboard > Functions
2. 查看是否有 `/api/cron/line-deadline-check`
3. 如果沒有，表示檔案可能不存在或路徑錯誤

### 方法 2：檢查本地檔案

確認檔案存在於：
```
pages/api/cron/line-deadline-check.ts
```

### 方法 3：測試 API

在瀏覽器中打開：
```
https://coolcool-ten.vercel.app/api/cron/line-deadline-check
```

如果看到：
- `{"error":"Method Not Allowed"}`：API 存在，但請求方法錯誤（應該是 POST）
- `{"error":"Unauthorized"}`：API 存在，但認證失敗
- `404 Not Found`：API 不存在或 URL 錯誤

## 請提供以下資訊

為了更準確地診斷問題，請提供：

1. **在 cron-job.org 中設定的完整 URL**（截圖或複製）
2. **Vercel 部署狀態**（是否為 Ready）
3. **Vercel Functions 列表**（是否有 `/api/cron/line-deadline-check`）
4. **瀏覽器測試結果**（打開 URL 後看到什麼）

這樣我可以提供更精確的解決方案。

