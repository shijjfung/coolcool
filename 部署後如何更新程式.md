# 部署後如何更新程式

## 🎯 快速回答

**如果連接到 GitHub，更新程式非常簡單**：
1. 修改程式碼
2. 推送到 GitHub
3. **Vercel 會自動重新部署** ✅

**不需要手動上傳！**

## 📊 兩種部署方式

### 方式 1：自動部署（推薦）✅

**設定**：Vercel 連接到 GitHub 倉庫

**更新流程**：
```
1. 修改程式碼（本地）
   ↓
2. git add .
   ↓
3. git commit -m "更新說明"
   ↓
4. git push
   ↓
5. Vercel 自動偵測到更新
   ↓
6. 自動重新部署（約 1-2 分鐘）
   ↓
7. 完成！網址自動更新
```

**優點**：
- ✅ 完全自動化
- ✅ 不需要手動操作
- ✅ 每次推送都會自動部署
- ✅ 可以查看部署歷史

### 方式 2：手動部署

**設定**：沒有連接到 GitHub，或使用 Vercel CLI

**更新流程**：
```
1. 修改程式碼
   ↓
2. 在 Vercel Dashboard 點擊 "Redeploy"
   或使用 Vercel CLI 執行部署命令
```

**缺點**：
- ❌ 需要手動操作
- ❌ 比較麻煩

## 🚀 推薦流程（自動部署）

### 第一次部署

1. **推送到 GitHub**（已完成 ✅）
2. **連接到 Vercel**：
   - 前往 https://vercel.com
   - 使用 GitHub 登入
   - 選擇專案 `coolcool`
   - 設定環境變數
   - 點擊 "Deploy"

3. **完成**：Vercel 會自動連接到 GitHub

### 之後的更新

**每次修改程式後**：

```bash
# 1. 修改程式碼（在您的電腦上）

# 2. 加入變更
git add .

# 3. 提交變更
git commit -m "更新說明：例如：優化手機端體驗"

# 4. 推送到 GitHub
git push

# 5. 完成！Vercel 會自動部署
```

**就是這麼簡單！** 🎉

## 📝 實際範例

### 範例 1：修復下載報表錯誤

```bash
# 1. 修改 pages/api/reports/[formId]/download.ts

# 2. 提交並推送
git add .
git commit -m "修復下載報表的中文檔名問題"
git push

# 3. 等待 1-2 分鐘，Vercel 自動部署完成
# 4. 網址自動更新，修復生效
```

### 範例 2：新增功能

```bash
# 1. 新增功能（例如：新增欄位類型）

# 2. 提交並推送
git add .
git commit -m "新增日期選擇欄位類型"
git push

# 3. Vercel 自動部署
# 4. 新功能上線
```

## 🔄 開發流程建議

### 本地開發 → 雲端部署

```
┌─────────────────┐
│  本地開發環境    │
│  localhost:3000 │
│  (您的電腦)      │
└────────┬────────┘
         │
         │ 1. 修改程式碼
         │ 2. 本地測試
         │ 3. 確認無誤
         │
         ▼
┌─────────────────┐
│  推送到 GitHub   │
│  git push        │
└────────┬────────┘
         │
         │ 自動觸發
         │
         ▼
┌─────────────────┐
│  Vercel 自動部署 │
│  (約 1-2 分鐘)   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  雲端版本更新    │
│  your-app.vercel.app │
└─────────────────┘
```

### 最佳實踐

1. **本地開發**：
   - 在 `localhost:3000` 開發和測試
   - 確認功能正常

2. **推送到 GitHub**：
   - 提交變更
   - 推送到 GitHub

3. **自動部署**：
   - Vercel 自動偵測
   - 自動重新部署
   - 約 1-2 分鐘完成

4. **驗證**：
   - 檢查 Vercel Dashboard 的部署狀態
   - 測試雲端版本是否正常

## ⚙️ Vercel 自動部署設定

### 第一次設定（只需一次）

1. **連接到 GitHub**：
   - 在 Vercel Dashboard 中
   - 選擇 "Import Project"
   - 選擇 GitHub 倉庫 `coolcool`
   - Vercel 會自動設定

2. **設定環境變數**：
   - 在 Vercel 專案設定中
   - 添加以下環境變數：
     ```
     NEXT_PUBLIC_SUPABASE_URL=您的Supabase URL
     NEXT_PUBLIC_SUPABASE_ANON_KEY=您的Anon Key
     SUPABASE_SERVICE_ROLE_KEY=您的Service Role Key
     DATABASE_TYPE=supabase
     ```

3. **完成**：之後每次推送都會自動部署

## 📊 部署狀態查看

### 在 Vercel Dashboard

- **Deployments** 頁面：查看所有部署歷史
- **每個部署**：
  - ✅ 成功（綠色）
  - ❌ 失敗（紅色，會顯示錯誤）
  - 🔄 進行中（黃色）

### 部署通知

- Vercel 會發送 Email 通知（可選）
- 可以在 Dashboard 查看部署狀態

## 🎯 總結

### 如果使用自動部署（推薦）

**更新程式 = 推送到 GitHub**

就是這麼簡單！

```bash
git add .
git commit -m "更新說明"
git push
```

**Vercel 會自動處理剩下的所有事情！**

### 優點

- ✅ 不需要手動上傳
- ✅ 自動化流程
- ✅ 可以查看部署歷史
- ✅ 如果部署失敗會通知
- ✅ 可以回滾到之前的版本

### 注意事項

- 每次推送都會觸發部署
- 部署需要約 1-2 分鐘
- 部署期間網站可能暫時無法訪問（通常很短）

## 💡 建議

**使用自動部署**，因為：
- 最簡單方便
- 不需要記住複雜的步驟
- 可以專注在開發上

**流程就是**：
1. 修改程式碼
2. `git push`
3. 完成！

需要我協助您設定 Vercel 自動部署嗎？

